GO
	USE MASTER 
GO
	DROP DATABASE CAFESHOP
GO
	CREATE DATABASE CAFESHOP
GO
	USE CAFESHOP 
GO
	CREATE TABLE NHANVIEN(
		ID INT IDENTITY PRIMARY KEY,
		TEN NVARCHAR(MAX),
		CHUCVU INT DEFAULT 0, -- 0: NHANVIEN, 1 LA QUAN TRI
		NGAYSINH DATETIME,
		GIOITINH INT, -- 0: NU, 1: NAM
		SDT NVARCHAR(MAX) DEFAULT '',
		EMAIL NVARCHAR(MAX) DEFAULT '',
		QUEQUAN NVARCHAR(MAX) DEFAULT '',
		ANH IMAGE,
		TAIKHOAN NVARCHAR(MAX),
		MATKHAU NVARCHAR(MAX)
	)
GO
	CREATE TABLE MATHANG(
		ID INT IDENTITY PRIMARY KEY,
		TEN NVARCHAR(MAX),
		DONVITINH NVARCHAR(MAX),
		GIABAN INT,
		THANHPHAN NVARCHAR(MAX) DEFAULT '',
		ANH IMAGE 
	)
GO
	CREATE TABLE THONGTINNHAHANG(
		ID INT IDENTITY PRIMARY KEY,
		TEN NVARCHAR(MAX),
		DIACHI NVARCHAR(MAX) DEFAULT ''
	)
GO
	CREATE TABLE KHO(
		ID INT IDENTITY PRIMARY KEY,
		MATHANGID INT,
			FOREIGN KEY (MATHANGID) REFERENCES MATHANG(ID),
		SOLUONG INT
	)
GO
	CREATE TABLE PHIEUNHAP(
		ID INT IDENTITY PRIMARY KEY,
		MAPHIEUNHAP NVARCHAR(MAX),
		NHANVIENID INT,
			FOREIGN KEY (NHANVIENID) REFERENCES NHANVIEN(ID),
		NGAYNHAP DATETIME,
		TONGTIEN INT
	)
GO
	CREATE TABLE CHITIETNHAP(
		ID INT IDENTITY PRIMARY KEY,
		MATHANGID INT,
			FOREIGN KEY (MATHANGID) REFERENCES MATHANG(ID),
		DONGIA INT,
		SOLUONG INT,
		THANHTIEN INT
	)
GO
	CREATE TABLE HOADON(
		ID INT IDENTITY PRIMARY KEY,
		MAHOADON NVARCHAR(MAX),
		NGAYNHAP DATETIME,
		NHANVIENID INT,
			FOREIGN KEY (NHANVIENID) REFERENCES NHANVIEN(ID),
		TONGTIEN INT,
		KHUYENMAI INT
	)
GO
	CREATE TABLE CHITIETHOADON(
		ID INT IDENTITY PRIMARY KEY,
		MATHANGID INT,
			FOREIGN KEY (MATHANGID) REFERENCES MATHANG(ID),
		DONGIA INT,
		SOLUONG INT,
		THANHTIEN INT,
		HOADONID INT,
			FOREIGN KEY (HOADONID) REFERENCES HOADON(ID)
	)
GO
	CREATE TABLE BANAN(
		ID INT IDENTITY PRIMARY KEY,
		TEN NVARCHAR(MAX),
		SOCHO INT,
		VITRI NVARCHAR(MAX) DEFAULT '',
		TRANGTHAI INT, -- 0: DANG TRONG, 1-- DANG CO KHACH
		HOADONID INT,
			FOREIGN KEY (HOADONID) REFERENCES HOADON(ID)
	)
GO